# Rock Paper Scissors Online

–û–Ω–ª–∞–π–Ω –∏–≥—Ä–∞ "–ö–∞–º–µ–Ω—å, –ù–æ–∂–Ω–∏—Ü—ã, –ë—É–º–∞–≥–∞" –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º gRPC, Consul –∏ PostgreSQL.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Consul** - Service discovery –∏ leader election
2. **ORM Service** - –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL (—Å leader election)
3. **Game Server** - –ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä —Å –ª–æ–≥–∏–∫–æ–π –∏–≥—Ä—ã (—Å leader election)
4. **Client** - GUI –∫–ª–∏–µ–Ω—Ç –Ω–∞ tkinter (–ø–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ Consul)

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.8+**
- **gRPC** - –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **Consul** - service discovery –∏ leader election
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π
- **Tkinter** - GUI –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞
- **Docker** - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Consul –∏ PostgreSQL

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
cd rps_game
pip install -r requirements.txt
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã –Ω–∞ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ.

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª [`config.json`](config.json:1) –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```json
{
  "database": {
    "host": "localhost",
    "port": 5434,
    "user": "postgres",
    "password": "mysecretpassword",
    "database": "rps_game"
  },
  "consul": {
    "host": "localhost",
    "port": 8500
  },
  "server": {
    "port": 50051
  },
  "orm": {
    "port": 50052
  }
}
```

**–í–∞–∂–Ω–æ:** IP –∞–¥—Ä–µ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `database.host` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ.

### 4. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ protobuf —Ñ–∞–π–ª—ã

```bash
python generate_protos.py
```

## –ó–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### Windows:
```bash
start_all.bat
```

#### Linux/Mac:
```bash
chmod +x start_all.sh
./start_all.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ó–∞–ø—É—Å—Ç–∏—Ç Consul –∏ PostgreSQL —á–µ—Ä–µ–∑ Docker Compose
2. –ó–∞–ø—É—Å—Ç–∏—Ç ORM Service
3. –ó–∞–ø—É—Å—Ç–∏—Ç Game Server
4. –ó–∞–ø—É—Å—Ç–∏—Ç –∫–ª–∏–µ–Ω—Ç

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

#### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Consul –∏ PostgreSQL

```bash
docker-compose up -d
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Consul UI: http://localhost:8500

#### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ ORM Service

```bash
python -m orm_service.orm_server
```

ORM —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å PostgreSQL
- –°–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Consul
- –ù–∞—á–Ω–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å leader election

#### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Game Server

```bash
python -m game_server.game_server
```

Game Server:
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Consul
- –ù–∞—á–Ω–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å leader election
- –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ ORM –ª–∏–¥–µ—Ä—É —á–µ—Ä–µ–∑ Consul

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–ª–∏–µ–Ω—Ç(—ã)

```bash
python -m client.rps_client
```

–ö–ª–∏–µ–Ω—Ç:
- –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Consul
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç Game Server –ª–∏–¥–µ—Ä–∞
- –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –ª–∏–¥–µ—Ä–∞

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –∏–≥—Ä—ã –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Consul Integration

### Service Discovery

1. **ORM Service** —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Consul –∫–∞–∫ `rps-orm-service`
2. **Game Server** —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ Consul –∫–∞–∫ `rps-game-service`
3. **Client** –ø–æ–ª—É—á–∞–µ—Ç –∞–¥—Ä–µ—Å Game Server –ª–∏–¥–µ—Ä–∞ –∏–∑ Consul KV store

### Leader Election

#### ORM Service:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Consul sessions –¥–ª—è leader election
- –õ–∏–¥–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–≤–æ–π URL –≤ `service/rps-orm/leader`
- Game Server –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ ORM –ª–∏–¥–µ—Ä—É

#### Game Server:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Consul sessions –¥–ª—è leader election
- –õ–∏–¥–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–≤–æ–π URL –≤ `service/rps-game/leader`
- Client –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Game Server –ª–∏–¥–µ—Ä—É

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –ª–∏–¥–µ—Ä–∞, –Ω–æ–≤—ã–π –ª–∏–¥–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è
- –ö–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ –Ω–æ–≤–æ–º—É –ª–∏–¥–µ—Ä—É
- Game Server –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –Ω–æ–≤–æ–º—É ORM –ª–∏–¥–µ—Ä—É

## –ö–∞–∫ –∏–≥—Ä–∞—Ç—å

1. **–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º** –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∏–≥—Ä—É
2. **–î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É** (—Å—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Ö–æ–¥–∞)
3. **–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É** –∏–ª–∏ **–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π** –ø–æ 4-–∑–Ω–∞—á–Ω–æ–º—É ID
4. **–î–æ–∂–¥–∏—Ç–µ—Å—å –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞** (–µ—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞–ª–∏ –∫–æ–º–Ω–∞—Ç—É)
5. **–í—ã–±–µ—Ä–∏—Ç–µ**: –ö–∞–º–µ–Ω—å ü™®, –ë—É–º–∞–≥–∞ üìÑ –∏–ª–∏ –ù–æ–∂–Ω–∏—Ü—ã ‚úÇÔ∏è
6. **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—É–Ω–¥–∞** –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–±–∞ –∏–≥—Ä–æ–∫–∞ —Å–¥–µ–ª–∞—é—Ç –≤—ã–±–æ—Ä
7. **–ù–∞–∂–º–∏—Ç–µ "Next Round"** –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞
8. **–°—á–µ—Ç** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞

## –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã

- **–ö–∞–º–µ–Ω—å** –ø–æ–±–µ–∂–¥–∞–µ—Ç **–ù–æ–∂–Ω–∏—Ü—ã**
- **–ù–æ–∂–Ω–∏—Ü—ã** –ø–æ–±–µ–∂–¥–∞—é—Ç **–ë—É–º–∞–≥—É**
- **–ë—É–º–∞–≥–∞** –ø–æ–±–µ–∂–¥–∞–µ—Ç **–ö–∞–º–µ–Ω—å**
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤—ã–±–æ—Ä = **–ù–∏—á—å—è**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
rps_game/
‚îú‚îÄ‚îÄ config.json                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤–∫–ª—é—á–∞—è IP –ë–î)
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ generate_protos.py          # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ protobuf
‚îú‚îÄ‚îÄ docker-compose.yml          # Consul + PostgreSQL
‚îú‚îÄ‚îÄ start_all.bat               # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Windows)
‚îú‚îÄ‚îÄ start_all.sh                # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (Linux/Mac)
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ protos/                     # Protobuf –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ game_service.proto      # –ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îî‚îÄ‚îÄ orm.proto               # ORM —Å–µ—Ä–≤–∏—Å
‚îÇ
‚îú‚îÄ‚îÄ orm_service/                # ORM —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ db_init.py              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ orm_server.py           # gRPC —Å–µ—Ä–≤–µ—Ä ORM + Consul
‚îÇ
‚îú‚îÄ‚îÄ game_server/                # –ò–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ game_logic.py           # –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ game_server.py          # gRPC –∏–≥—Ä–æ–≤–æ–π —Å–µ—Ä–≤–µ—Ä + Consul
‚îÇ
‚îî‚îÄ‚îÄ client/                     # –ö–ª–∏–µ–Ω—Ç
    ‚îî‚îÄ‚îÄ rps_client.py           # GUI –∫–ª–∏–µ–Ω—Ç + Consul discovery
```

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Consul Integration (–∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ)

- **Service Discovery**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ Consul
- **Leader Election**: ORM –∏ Game Server –∏—Å–ø–æ–ª—å–∑—É—é—Ç Consul –¥–ª—è –≤—ã–±–æ—Ä–∞ –ª–∏–¥–µ—Ä–∞
- **Health Checks**: Consul –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∑–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- **KV Store**: –ê–¥—Ä–µ—Å–∞ –ª–∏–¥–µ—Ä–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Consul KV
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**: –ö–ª–∏–µ–Ω—Ç—ã —Å–ª–µ–¥—è—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –ª–∏–¥–µ—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **–û–¥–Ω–∞ –ë–î**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- **IP –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞**: IP –∞–¥—Ä–µ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ [`config.json`](config.json:3)
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫**: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ docker-compose
- **–¢–∞–±–ª–∏—Ü–∞ games**: –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π

### –û—Ç–ª–∏—á–∏—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ò–≥—Ä–∞**: Rock/Paper/Scissors –≤–º–µ—Å—Ç–æ Ultimate Tic-Tac-Toe
2. **–Ø–∑—ã–∫**: Python –≤–º–µ—Å—Ç–æ C#
3. **GUI**: Tkinter –≤–º–µ—Å—Ç–æ WinForms
4. **Consul**: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ
5. **–û–¥–Ω–∞ –ë–î**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ —Å –æ–¥–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Consul UI

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8500 –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –°—Ç–∞—Ç—É—Å–∞ health checks
- KV store —Å –∞–¥—Ä–µ—Å–∞–º–∏ –ª–∏–¥–µ—Ä–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã—Ö sessions

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–¥–µ—Ä–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ORM –ª–∏–¥–µ—Ä–∞
curl http://localhost:8500/v1/kv/service/rps-orm/leader?raw

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Game Server –ª–∏–¥–µ—Ä–∞
curl http://localhost:8500/v1/kv/service/rps-game/leader?raw
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Leader Election

### –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö ORM —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
python -m orm_service.orm_server

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 (–∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ config.json –Ω–∞ 50053)
python -m orm_service.orm_server
```

–û–¥–∏–Ω —Å—Ç–∞–Ω–µ—Ç –ª–∏–¥–µ—Ä–æ–º, –¥—Ä—É–≥–æ–π - follower. –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ª–∏–¥–µ—Ä–∞, follower –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–µ—Ç –ª–∏–¥–µ—Ä–æ–º.

### –ó–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Game —Å–µ—Ä–≤–µ—Ä–æ–≤

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1
python -m game_server.game_server

# –¢–µ—Ä–º–∏–Ω–∞–ª 2 (–∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ config.json –Ω–∞ 50052)
python -m game_server.game_server
```

–ö–ª–∏–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞—Ç—Å—è –∫ –Ω–æ–≤–æ–º—É –ª–∏–¥–µ—Ä—É.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Consul –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Docker
docker ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Consul
docker-compose restart consul
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs rps-db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ë–î
docker-compose restart rps-db
```

### –°–µ—Ä–≤–∏—Å—ã –Ω–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ Consul

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Consul –∑–∞–ø—É—â–µ–Ω: http://localhost:8500
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ [`config.json`](config.json:1)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Consul UI - –µ—Å—Ç—å –ª–∏ –ª–∏–¥–µ—Ä Game Server
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Game Server –∑–∞–ø—É—â–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### Protobuf –æ—à–∏–±–∫–∏

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade grpcio grpcio-tools protobuf

# –ü–µ—Ä–µ—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ protobuf —Ñ–∞–π–ª—ã
python generate_protos.py
```

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Python –ø—Ä–æ—Ü–µ—Å—Å—ã (Ctrl+C –≤ –∫–∞–∂–¥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ [`config.json`](config.json:1) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏–≥—Ä—ã

–õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [`game_server/game_logic.py`](game_server/game_logic.py:1).

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

GUI –∫–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [`client/rps_client.py`](client/rps_client.py:1).

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤ Consul
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Consul KV –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ health checks

## –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä —Å gRPC –∏ Consul.
